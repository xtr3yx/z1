<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Gym Games</title>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function GymGames() {
      const [stage, setStage] = useState(1);
      const [cards, setCards] = useState([]);
      const [flipped, setFlipped] = useState([]);
      const [matched, setMatched] = useState([]);
      const [moves, setMoves] = useState(0);

      const patterns = [
        { id: 1, t: "üèãÔ∏è PRZYSIADY", c: "#DC2626" },
        { id: 2, t: "üí™ POMPKI", c: "#EA580C" },
        { id: 3, t: "ü¶µ MARTWY CIƒÑG", c: "#CA8A04" },
        { id: 4, t: "üèÉ BIE≈ªNIA", c: "#65A30D" },
        { id: 5, t: "ü§∏ BURPEES", c: "#059669" },
        { id: 6, t: "üèãÔ∏è SZTANGA", c: "#0891B2" },
        { id: 7, t: "‚öñÔ∏è HANTLE", c: "#0284C7" },
        { id: 8, t: "üîó KETTLEBELL", c: "#2563EB" }
      ];

      useEffect(() => init(), []);

      function init() {
        const d = [...patterns, ...patterns]
          .map((c, i) => ({ ...c, u: i }))
          .sort(() => Math.random() - 0.5);
        setCards(d);
        setFlipped([]);
        setMatched([]);
        setMoves(0);
      }

      function clickCard(i) {
        if (flipped.includes(i) || matched.includes(i) || flipped.length === 2) return;
        const f = [...flipped, i];
        setFlipped(f);

        if (f.length === 2) {
          setMoves(m => m + 1);
          const [a, b] = f;
          if (cards[a].id === cards[b].id) {
            setTimeout(() => {
              setMatched(m => [...m, a, b]);
              setFlipped([]);
            }, 400);
          } else {
            setTimeout(() => setFlipped([]), 700);
          }
        }
      }

      /* ===== GRA 1 ===== */
      if (stage === 1) {
        return (
          <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-pink-600 p-4">
            <div className="bg-white p-6 rounded-2xl max-w-4xl w-full">
              <h1 className="text-3xl font-bold text-center mb-4">üí™ Memory ‚Äì Si≈Çownia</h1>
              <p className="text-center mb-2">Ruchy: <b>{moves}</b></p>

              <div className="grid grid-cols-4 gap-3">
                {cards.map((c, i) => {
                  const open = flipped.includes(i) || matched.includes(i);
                  return (
                    <div key={c.u}
                      onClick={() => clickCard(i)}
                      className="aspect-square rounded-xl cursor-pointer flex items-center justify-center text-white font-bold text-xl"
                      style={{ background: open ? c.c : "#6366F1" }}>
                      {open ? c.t : "‚ùì"}
                    </div>
                  );
                })}
              </div>

              {matched.length === cards.length && (
                <button
                  onClick={() => setStage(2)}
                  className="mt-6 mx-auto block bg-green-500 text-white px-6 py-3 rounded-xl text-xl">
                  Gra 2 ‚û°Ô∏è
                </button>
              )}
            </div>
          </div>
        );
      }

      /* ===== GRA 2 ===== */
      if (stage === 2) {
        return (
          <div className="min-h-screen flex items-center justify-center bg-indigo-600">
            <div className="bg-white p-10 rounded-2xl text-center">
              <h1 className="text-4xl font-bold mb-4">üéâ GRATULACJE</h1>
              <p className="text-xl mb-6">Uko≈Ñczy≈Çe≈õ gry</p>
              <div className="text-[120px] font-black text-indigo-700">9</div>
              <button
                onClick={() => { setStage(1); init(); }}
                className="mt-6 bg-indigo-600 text-white px-6 py-3 rounded-xl">
                üîÑ Zagraj ponownie
              </button>
            </div>
          </div>
        );
      }
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<GymGames />);
  </script>
</body>
</html>
